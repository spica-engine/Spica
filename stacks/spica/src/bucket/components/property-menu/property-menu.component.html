<button canInteract="bucket:update" (click)="editNewProperty(property.key)" mat-menu-item>
  <mat-icon>edit</mat-icon>
  <span>Edit field</span>
</button>
<ng-container
  *ngIf="
    !['$$spicainternal_new_property', '$$spicainternal_actions'].includes(
      displayedProperties[displayedProperties.indexOf(property.key) + 1]
    )
  "
>
  <button canInteract="bucket:update" (click)="moveField(property.key, 1)" mat-menu-item>
    <mat-icon>arrow_forward</mat-icon>
    <span> Move Right </span>
  </button>
</ng-container>

<ng-container
  *ngIf="displayedProperties[displayedProperties.indexOf(property.key) - 1] != '$$spicainternal_id'"
>
  <button canInteract="bucket:update" (click)="moveField(property.key, -1)" mat-menu-item>
    <mat-icon>arrow_back</mat-icon>
    <span>Move Left</span>
  </button>
</ng-container>

<mat-divider></mat-divider>
<span
  mat-menu-item
  class="delete-field-content"
  [matTooltipDisabled]="schema.primary != property.key"
  matTooltip="In order to delete the primary field, you must first select another field as primary."
>
  <button
    color="warn"
    [disabled]="schema.primary == property.key"
    (click)="$event.stopImmediatePropagation()"
    (confirm)="deleteProperty(property.key)"
    [matAwareDialog]="{
      title: 'Confirmation',
      templateOrDescription: deleteFieldDialog,
      answer: '',
      noAnswer: true
    }"
    [matAwareDialogDisabled]="!schema._id"
    canInteract="bucket:update"
    mat-button
  >
    <mat-icon color="warn">delete</mat-icon>
    <span>Delete field</span>
  </button>
</span>

<ng-template #deleteFieldDialog let-answer="answer">
  <p>
    This action will remove the field from bucket entries.
  </p>
  <p>
    Please confirm this action to continue.
  </p>
</ng-template>
